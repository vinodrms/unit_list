<div class="col-md-4 col-sm-4 col-xs-12 form-group">
	<label>{{ 'Price per person' | translate }} </label>
	<div class="input-group">
		<div class="btn-group" data-toggle="buttons">
			<button class="btn btn-default" (click)="isPricePerNumberOfPersons=true" [ngClass]="{'active': isPricePerNumberOfPersons}"
			[disabled]="readonly">
				{{ 'Yes' | translate }}
			</button>
			<button class="btn btn-default" (click)="isPricePerNumberOfPersons=false" [ngClass]="{'active': !isPricePerNumberOfPersons}"
			[disabled]="readonly">
				{{ 'No' | translate }}
			</button>
		</div>
	</div>
	<small class="text-muted" *ngIf="isPricePerNumberOfPersons">
		<i class="fa fa-info-circle"></i> {{ 'Total price will be the sum of each person occupying the room, added together.' | translate }} 
	</small>
	<small class="text-muted" *ngIf="!isPricePerNumberOfPersons">
		<i class="fa fa-info-circle"></i> {{ 'One price per Room Category, regardless of the amount of occupants' | translate }} 
	</small>
</div>

<div class="col-md-8 col-sm-8 col-xs-12">
	<loading-component [isLoading]="isLoading"></loading-component>
	<div class="row" *ngIf="!isLoading">
		<div class="col-xs-12 form-group">
			<label>{{ 'Price configuration in %ccySymbol%' | translate:{ccySymbol: ccy.nativeSymbol} }}</label>

			<div class="row">
				<div class="col-md-12 col-sm-12 col-xs-12 form-group" *ngFor="let priceVM of priceContainer.priceVMList">
					<label>{{ priceVM.roomCategoryStats.roomCategory.displayName }}
						<small> 
							{{ getNoRoomsLabel(priceVM.roomCategoryStats.noOfRooms) }} x
							<config-capacity [configCapacity]="priceVM.roomCategoryStats.capacity.totalCapacity"></config-capacity>
						</small>
					</label>
					<a class="btn" 
						*ngIf="priceVM.previousRoomCategoryId && !readonly" 
						(click)="priceContainer.copyPrices(priceVM.previousRoomCategoryId, priceVM.roomCategoryStats.roomCategory.id)">
						<i class="fa unitpal-font">[</i> <small>{{ 'Copy Prices from Previous Room Category' | translate }}</small>
					</a>
					
					<!-- TODO: move to separate component + module -->
					<div class="row" *ngIf="!isPricePerNumberOfPersons">
						<div class="col-md-6 col-sm-6 col-xs-12 form-group">
							<div class="input-group" [ngClass]="{'form-warning': displayError()&&!priceVM.price.isValid()}">
								<input type="number" placeholder="{{'Price' | translate}}" class="form-control" [(ngModel)]="priceVM.price.price" name="price"
								[readonly]="readonly" />
							</div>
							<label class="form-warning"><small><i class="fa fa-info-circle"></i> {{ 'Invalid Price' | translate }}</small></label>
						</div>
					</div>

					<!-- TODO: move to separate component + module -->
					<div class="row" *ngIf="isPricePerNumberOfPersons">
						<div class="col-md-6 col-sm-6 col-xs-6">
							<label><small>{{ 'Price For Adults' | translate }}*</small></label>
							<div class="row">
								<div class="col-md-12 col-sm-12 col-xs-12 form-group" *ngFor="let pricePerAdult of priceVM.price.adultsPriceList">
									<div class="input-group" [ngClass]="{'form-warning': displayError()&&!pricePerAdult.isValid()}">
										<span class="input-group-addon"><small>{{pricePerAdult.noOfPersons}}{{getNumberSuffix(pricePerAdult.noOfPersons)}}</small> <span class="unitpal-font">:</span></span>
										<input type="number" class="form-control" [(ngModel)]="pricePerAdult.price" name="adultPrice"
										[readonly]="readonly" />
									</div>
									<label class="form-warning"><small><i class="fa fa-info-circle"></i> {{ 'Invalid Price' | translate }}</small></label>
								</div>
							</div>
						</div>
						<div class="col-md-6 col-sm-6 col-xs-6">
							<label><small>{{ 'Price For Children' | translate }}*</small></label>
							<div class="row">
								<div class="col-md-12 col-sm-12 col-xs-12" *ngFor="let pricePerChild of priceVM.price.childrenPriceList">
									<div class="row">	
										<div class="col-xs-12 form-group" *ngIf="pricePerChild.noOfPersons === 1">	
											<div class="input-group" [ngClass]="{'form-warning': displayError()&&!priceVM.price.firstChildWithAdultInSharedBedPriceIsValid()}">
												<span class="input-group-addon"><small>1{{getNumberSuffix(1)}}</small> <span class="unitpal-font">;</span></span>
												<input type="number" class="form-control" [(ngModel)]="priceVM.price.firstChildWithAdultInSharedBedPrice" name="firstChildInSharedBedPrice"
												[readonly]="readonly" />
											</div>
											<label class="form-warning"><small><i class="fa fa-info-circle"></i> {{ 'Invalid Price' | translate }}</small></label>
											<small class="text-muted">
												<i class="fa fa-info-circle"></i> {{ "Reservation with at least one adult if space is available in parent's bed" | translate }}
											</small>
										</div>

										<div class="col-xs-12 form-group" *ngIf="!roomCategoryHasOnlyOneAdultAndZeroChildren(priceVM.roomCategoryStats)">	
											<div class="input-group" [ngClass]="{'form-warning': displayError()&&!pricePerChild.isValid()}">
												<span class="input-group-addon"><small>{{pricePerChild.noOfPersons}}{{getNumberSuffix(pricePerChild.noOfPersons)}}</small> <span class="unitpal-font">;</span></span>
												<input type="number" class="form-control" [(ngModel)]="pricePerChild.price" name="childPrice"
												[readonly]="readonly" />
											</div>
											<label class="form-warning"><small><i class="fa fa-info-circle"></i> {{ 'Invalid Price' | translate }}</small></label>
											<small class="text-muted" *ngIf="pricePerChild.noOfPersons === 1">
												<i class="fa fa-info-circle"></i>  {{ "Reservation with at least one adult if space is NOT available in parent's bed" | translate }}
											</small>
										</div>
										
										<div class="col-xs-12 form-group" *ngIf="pricePerChild.noOfPersons === 1">	
											<div class="input-group" [ngClass]="{'form-warning': displayError()&&!priceVM.price.firstChildWithoutAdultPriceIsValid()}">
												<span class="input-group-addon"><small>1{{getNumberSuffix(1)}}</small> <span class="unitpal-font">;</span></span>
												<input type="number" class="form-control" [(ngModel)]="priceVM.price.firstChildWithoutAdultPrice" name="firstChildPrice"
												[readonly]="readonly" />
											</div>
											<label class="form-warning"><small><i class="fa fa-info-circle"></i> {{ 'Invalid Price' | translate }}</small></label>
											<small class="text-muted">
												<i class="fa fa-info-circle"></i> {{ 'Reservation without adults' | translate }}
											</small>
										</div>										
									</div>
								</div>
							</div>
						</div>
					</div>

					<!-- TODO: display price exceptions -->
				</div>
			</div>
		</div>
	</div>
</div>